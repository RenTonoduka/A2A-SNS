# /buzz コマンド

バズポストを特定し、バズ要因を分析する

## 使用方法

```
/buzz @username              # バズポスト分析
/buzz @username --threshold 5  # 閾値指定（平均の5倍以上）
/buzz --recent              # 最新抽出データから分析
```

## バズの定義

```
バズスコア = いいね数 / 平均いいね数

閾値:
- デフォルト: 3倍以上
- --threshold N: N倍以上
```

## 実行手順

### Step 1: データ取得

```bash
# 新規抽出
python post_extractor.py <username> --max 100

# または既存データ使用
ls -t data/x_posts_*.json | head -1
```

### Step 2: バズ判定

全ポストの平均エンゲージメントを計算し、閾値を超えるポストを抽出。

### Step 3: バズ要因分析

各バズポストについて以下を分析:

1. **タイミング**
   - 投稿時間帯
   - 曜日
   - イベントとの関連

2. **コンテンツ**
   - キーワード
   - トピック
   - 感情（ポジティブ/ネガティブ）

3. **形式**
   - テキストのみ vs メディア付き
   - ポストの長さ
   - スレッド vs 単独

4. **外部要因**
   - リツイート元
   - メンション

### Step 4: パターン抽出

バズポスト間の共通パターンを特定。

### Step 5: 出力

```
🔥 @username バズポスト分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【バズ概要】
- 分析対象: XX件
- バズ認定: X件 (X%)
- 閾値: 平均の3倍以上

【バズランキング】
1. 🥇 バズスコア: 15.2x (❤️ 45,000)
   「[ポスト内容の要約...]」
   📅 2024-01-01 18:30
   🔥 バズ要因: トレンドトピック、感情訴求

2. 🥈 バズスコア: 8.7x (❤️ 26,000)
   「[ポスト内容の要約...]」
   📅 2024-01-02 12:00
   🔥 バズ要因: 有名人メンション

3. 🥉 バズスコア: 6.3x (❤️ 19,000)
   ...

【バズパターン分析】
┌──────────────┬─────────────────┐
│ 要因         │ 出現率          │
├──────────────┼─────────────────┤
│ 夕方投稿     │ 70%             │
│ メディア付き │ 60%             │
│ 質問形式     │ 40%             │
│ 数字入り     │ 50%             │
└──────────────┴─────────────────┘

【最適投稿条件】
- 時間帯: 18:00〜21:00
- 形式: 画像付き + 質問形式
- 長さ: 100〜150文字

【推奨アクション】
1. 〇〇時台に投稿する
2. 〇〇なトピックを選ぶ
3. 〇〇な表現を使う
```

---

## 保存先

```
data/analysis/YYYYMMDD_@username_buzz.md
```

---

## オプション

| オプション | 説明 | デフォルト |
|-----------|------|-----------|
| `--threshold N` | バズ閾値（平均のN倍） | 3 |
| `--top N` | 上位N件を詳細分析 | 10 |
| `--export` | JSONで詳細出力 | false |

---

## 入力例

```
/buzz @elonmusk --threshold 5 --top 20
```

## 関連コマンド

- `/extract` - ポスト抽出
- `/analyze` - 総合分析
- `/compare` - 比較分析
