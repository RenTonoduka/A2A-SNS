# /analyze コマンド

抽出したポストを分析してインサイトを抽出する

## 使用方法

```
/analyze                           # 最新の抽出データを分析
/analyze data/x_posts_XXXX.json   # 指定ファイルを分析
/analyze @username                 # 抽出 + 分析（自動実行）
```

## 実行手順

### Step 1: データ読み込み

`data/` ディレクトリから最新のJSONファイルを読み込む:

```bash
ls -t data/x_posts_*.json | head -1
```

または指定されたファイルを読み込む。

### Step 2: 基本統計計算

以下の統計を計算:

```python
# 計算項目
- 総ポスト数
- 期間（最古〜最新）
- 平均いいね数
- 平均RT数
- 平均リプライ数
- 中央値・最大値・最小値
```

### Step 3: バズポスト特定

バズの定義:
```
バズ = いいね数 > 平均いいね数 × 3
```

バズポストを抽出し、共通パターンを分析。

### Step 4: パターン分析

分析項目:
1. **投稿時間帯**
   - 最もエンゲージメントが高い時間帯
   - 曜日別傾向

2. **コンテンツ傾向**
   - よく使われるキーワード
   - メディア有無の影響
   - ポストの長さとエンゲージメントの関係

3. **バズ要因**
   - 高エンゲージメントポストの共通点
   - トピック傾向

### Step 5: 出力

```
📊 @username ポスト分析レポート
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【基本統計】
- 分析対象: XX件
- 期間: YYYY-MM-DD 〜 YYYY-MM-DD
- 平均いいね: X,XXX
- 平均RT: XXX

【エンゲージメント分布】
- 最高: XX,XXX いいね
- 中央値: X,XXX いいね
- 75%ile: X,XXX いいね

【バズポスト】(平均の3倍以上: X件)
1. [内容] - ❤️ XX,XXX
   → バズ要因: [分析結果]
2. ...

【投稿パターン】
- 最適時間帯: XX時〜XX時
- 最適曜日: X曜日

【コンテンツ傾向】
- 高エンゲージメントのキーワード: [word1], [word2]...
- メディア付きポストの影響: +XX%

【推奨アクション】
1. XXX
2. XXX
```

---

## 分析レポート保存

```
data/analysis/YYYYMMDD_@username_analysis.md
```

---

## オプション

| オプション | 説明 |
|-----------|------|
| `--top N` | トップNポストを詳細分析 |
| `--export csv` | 統計をCSVで出力 |
| `--compare @user2` | 他アカウントと比較 |

---

## 入力例

```
/analyze @elonmusk --top 10
```

## 関連コマンド

- `/extract` - ポスト抽出
- `/compare` - 複数アカウント比較
- `/buzz` - バズポスト特化分析
