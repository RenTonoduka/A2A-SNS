# /generate コマンド

バズポストを参考に、オリジナルのXポストを生成

## 使用方法

```
/generate                              # バズポストから自動生成
/generate --topic "AI技術"              # トピック指定
/generate --style entertaining         # スタイル指定
/generate --save-sheets                # スプシに保存
```

## 生成フロー

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ バズポスト  │────▶│  パターン   │────▶│  ポスト     │
│   読込     │     │   分析      │     │   生成      │
└─────────────┘     └─────────────┘     └─────────────┘
                                              │
                    ┌─────────────┐           │
                    │   保存      │◀──────────┘
                    │ (スプシ/   │
                    │  ローカル)  │
                    └─────────────┘
```

## 実行手順

### Step 1: バズポスト確認

```bash
# 保存済みバズポストを確認
python post_generator.py analyze --limit 10
```

### Step 2: ポスト生成

このコマンドが呼ばれたら、以下の手順で実行:

1. `python post_generator.py generate` でプロンプトを取得
2. そのプロンプトを使ってポストを生成（Claude Code CLI自身で実行）
3. 結果を整形してユーザーに返す

```bash
# プロンプト取得
python post_generator.py generate --topic "指定トピック" --style informative
```

### Step 3: 生成実行

取得したプロンプトに基づいて、以下のJSON形式でポストを生成:

```json
{
  "posts": [
    {
      "content": "生成したポスト本文（280文字以内）",
      "hashtags": ["#タグ1", "#タグ2"],
      "buzz_patterns_used": ["使用したバズパターン"],
      "predicted_engagement": "high/medium/low",
      "reasoning": "バズ予測の理由"
    }
  ]
}
```

### Step 4: 保存

```bash
# ローカル保存（自動）
# data/generated/generated_YYYYMMDD_HHMMSS.json

# スプレッドシート保存
python post_generator.py save-buzz --spreadsheet-id "YOUR_SHEET_ID"
```

---

## スタイルオプション

| スタイル | 説明 |
|---------|------|
| `informative` | 情報提供型（デフォルト） |
| `entertaining` | エンタメ型 |
| `provocative` | 議論喚起型 |
| `educational` | 教育型 |

## トーンオプション

| トーン | 説明 |
|-------|------|
| `professional` | プロフェッショナル（デフォルト） |
| `casual` | カジュアル |
| `humorous` | ユーモア |
| `inspirational` | インスピレーション |

---

## 出力例

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🚀 X Post Generator
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📊 参考バズポスト: 5件
   平均いいね: 45,000
   平均RT: 8,500

🔍 バズパターン分析:
   - 短文で核心を突く
   - 絵文字を効果的に使用
   - 質問形式で engagement 促進

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📝 生成ポスト (3件):

1️⃣ [High Engagement予測]
   AI時代に必要なのは「学ぶ力」じゃない。

   「学び直す力」だ。

   毎日10分、新しいことに触れるだけで
   1年後には別人になれる。

   #AI #学び直し #自己成長

   💡 使用パターン: 短文インパクト、改行活用

2️⃣ [Medium Engagement予測]
   ...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💾 保存先:
   📁 data/generated/generated_20240115_120000.json
   📊 Google Sheets: 記録済み
```

---

## バズパターンの分析観点

生成時に以下の観点でバズポストを分析:

1. **構造パターン**
   - 文字数
   - 改行の使い方
   - 絵文字の位置

2. **コンテンツパターン**
   - トピック
   - フック（最初の一文）
   - CTA（行動喚起）

3. **エンゲージメントパターン**
   - 質問形式
   - 議論を呼ぶ主張
   - 共感ポイント

---

## スプレッドシート連携

### 保存される情報

| 列 | 内容 |
|----|------|
| A | 生成日時 |
| B | ポスト内容 |
| C | スタイル |
| D | トーン |
| E | ハッシュタグ |
| F | 参照バズポスト数 |
| G | 使用パターン |
| H | 予測エンゲージメント |

### 設定方法

```bash
# 環境変数で設定
export X_SHEETS_ID="your-spreadsheet-id"

# または引数で指定
python post_generator.py generate --spreadsheet-id "YOUR_ID"
```

---

## 関連コマンド

- `/monitor` - バズポスト監視・検出
- `/buzz` - バズ分析
- `/analyze` - ポスト分析
- `/extract` - ポスト抽出

---

## 注意事項

1. **バズポストが必要**: 先に `/monitor` でバズポストを検出しておく
2. **著作権**: 参考にするだけで、コピーは禁止
3. **オリジナリティ**: 生成後は自分の言葉で調整推奨
4. **投稿タイミング**: 生成したポストは最適な時間に投稿
